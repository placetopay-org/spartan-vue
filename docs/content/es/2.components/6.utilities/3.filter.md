---
title: Filter
description: Un componente versátil de filtros para construir interfaces de filtrado dinámicas con múltiples tipos de campos, operadores y filtros guardados.
navigation:
  icon: i-lucide-filter
---

::component-status
::

# Uso

El componente `SFilter` permite construir interfaces de filtrado dinámicas. Los usuarios pueden agregar, configurar y aplicar filtros sobre diferentes campos usando varios operadores y tipos de entrada.

::spartan-component
---
external: ['fields']
props:
  fields:
    - id: name
      name: Nombre
      interfaces:
        oneInput:
          operators:
            - equal
            - contains
            - startsWith
    - id: status
      name: Estado
      interfaces:
        options:
          options:
            - id: active
              label: Activo
            - id: inactive
              label: Inactivo
            - id: pending
              label: Pendiente
          operators:
            - equal
            - notEqual
  hideApplyButton: false
  hideClearButton: false
ignore:
  - responsive
  - applyWhenClear
  - immediateApply
  - saved
---
::

## Interfaces

Un campo puede tener una o más interfaces. Cada interfaz define una forma diferente en que el usuario puede ingresar un valor de filtro.

### oneInput

Para campos que requieren un solo valor. Soporta texto, números, fechas y montos. Cuando se omite `type`, el input es de texto por defecto.

::spartan-component
---
external: ['fields']
props:
  fields:
    - id: price
      name: Precio
      interfaces:
        oneInput:
          type: amount
          currency: USD
          currencies:
            - USD
            - EUR
            - GBP
          operators:
            - equal
            - greaterThan
            - lessThan
            - greaterThanOrEqual
            - lessThanOrEqual
      state:
        operator: greaterThan
        value: '100'
hide:
  - hideApplyButton
  - hideClearButton
  - responsive
  - applyWhenClear
  - immediateApply
  - saved
---
::

### twoInputs

Para campos que requieren un rango de valores (ej: rangos de fechas, rangos de precios).

::spartan-component
---
external: ['fields']
props:
  fields:
    - id: amount
      name: Monto
      interfaces:
        twoInputs:
          type: amount
          currency: USD
          operators:
            - between
            - notBetween
      state:
        operator: between
        value:
          - '100'
          - '500'
hide:
  - hideApplyButton
  - hideClearButton
  - responsive
  - applyWhenClear
  - immediateApply
  - saved
---
::

### options

Para campos con un conjunto predefinido de opciones. Soporta selección simple y múltiple.

::spartan-component
---
external: ['fields']
props:
  fields:
    - id: brand
      name: Marca
      interfaces:
        options:
          options:
            - id: '1'
              label: Nike
            - Adidas
            - Puma
            - Reebok
          multiple: true
          operators:
            - equal
            - notEqual
            - contains
      state:
        operator: equal
        value:
          - Adidas
hide:
  - hideApplyButton
  - hideClearButton
  - responsive
  - applyWhenClear
  - immediateApply
  - saved
---
::

Las opciones pueden ser objetos con `id` y `label`, o strings simples.

### selection

Para campos donde el usuario ingresa sus propios valores como tags. Ideal para palabras clave, categorías dinámicas o cualquier campo donde el usuario necesite definir valores personalizados.

::spartan-component
---
external: ['fields']
props:
  fields:
    - id: tags
      name: Etiquetas
      interfaces:
        selection:
          operators:
            - equal
            - notEqual
hide:
  - hideApplyButton
  - hideClearButton
  - responsive
  - applyWhenClear
  - immediateApply
  - saved
---
::

### none

Para verificaciones de existencia (no se necesita valor de entrada).

::spartan-component
---
external: ['fields']
props:
  fields:
    - id: avatar
      name: Tiene Avatar
      interfaces:
        none:
          operators:
            - exist
            - notExist
hide:
  - hideApplyButton
  - hideClearButton
  - responsive
  - applyWhenClear
  - immediateApply
  - saved
---
::

## Múltiples Interfaces

Un solo campo puede tener múltiples interfaces, permitiendo al usuario elegir entre diferentes modos de entrada según el operador.

::spartan-component
---
external: ['fields']
props:
  fields:
    - id: price
      name: Precio
      interfaces:
        oneInput:
          type: number
          operators:
            - equal
            - greaterThan
            - lessThan
        twoInputs:
          type: number
          operators:
            - between
            - notBetween
        none:
          operators:
            - exist
            - notExist
hide:
  - hideApplyButton
  - hideClearButton
  - responsive
  - applyWhenClear
  - immediateApply
  - saved
---
::

## Operadores Personalizados

Puedes definir operadores personalizados como objetos con `id`, `label`, y un `tag` opcional (string o función) que se muestra en el badge.

::spartan-component
---
external: ['fields']
props:
  fields:
    - id: reference
      name: Referencia
      interfaces:
        oneInput:
          operators:
            - equal
            - id: customSearch
              label: Buscar por ref
              tag: 'Ref: '
      state:
        operator:
          id: customSearch
          label: Buscar por ref
          tag: 'Ref: '
        value: ABC-123
hide:
  - hideApplyButton
  - hideClearButton
  - responsive
  - applyWhenClear
  - immediateApply
  - saved
---
::

## Filtros Permanentes

Establece `permanent: true` en un campo para evitar que sea eliminado o limpiado por el usuario.

::spartan-component
---
external: ['fields']
props:
  fields:
    - id: tenant
      name: Comercio
      permanent: true
      interfaces:
        options:
          options:
            - id: '1'
              label: Comercio Principal
            - id: '2'
              label: Secundario
          operators:
            - equal
      state:
        operator: equal
        value: '1'
    - id: status
      name: Estado
      interfaces:
        options:
          options:
            - id: active
              label: Activo
            - id: inactive
              label: Inactivo
          operators:
            - equal
            - notEqual
hide:
  - hideApplyButton
  - hideClearButton
  - responsive
  - applyWhenClear
  - immediateApply
  - saved
---
::

## Ocultar Botones

Usa `hideApplyButton` y `hideClearButton` para controlar la visibilidad de los botones de acción.

::spartan-component
---
external: ['fields']
props:
  fields:
    - id: name
      name: Nombre
      interfaces:
        oneInput:
          operators:
            - equal
            - contains
      state:
        operator: contains
        value: John
  hideApplyButton: false
  hideClearButton: false
ignore:
  - responsive
  - applyWhenClear
  - immediateApply
  - saved
---
::

## Validación

Los campos soportan validación personalizada a través de la función `validate`. Recibe el valor actual y el operador, y debe retornar un string con el mensaje de error (o `null` si es válido). Soporta validación asíncrona.

```vue
<template>
  <SFilter :fields="fields" @apply="onApply" />
</template>

<script setup lang="ts">
import { SFilter, type TField } from '@placetopay/spartan-vue';

const fields: TField[] = [
  {
    id: 'bin',
    name: 'BIN de Tarjeta',
    interfaces: {
      oneInput: {
        operators: ['equal'],
      },
    },
    validate: async (value) => {
      const binRegex = /^\d{6}$/;
      return !binRegex.test(value) ? 'El BIN debe tener exactamente 6 dígitos' : null;
    },
  },
  {
    id: 'amount',
    name: 'Monto',
    interfaces: {
      twoInputs: {
        type: 'amount',
        currency: 'USD',
        operators: ['between'],
      },
    },
    validate: (value, operator) => {
      return operator === 'between' && parseFloat(value[0]) > parseFloat(value[1])
        ? 'El valor mínimo debe ser menor al máximo'
        : null;
    },
  },
];
</script>
```

## Filtros Guardados

El componente soporta guardar y cargar configuraciones de filtros mediante la prop `saved` y los eventos `save`/`load`.

```vue
<template>
  <SFilter
    :fields="fields"
    :saved="savedFilters"
    @apply="onApply"
    @save="onSave"
    @load="onLoad"
  />
</template>

<script setup lang="ts">
import { ref } from 'vue';
import type { TField, TSaveData } from '@placetopay/spartan-vue';

const savedFilters = ref<TSaveData[]>([]);

const onSave = (data: TSaveData[]) => {
  savedFilters.value = data;
};

const onLoad = (filters: TField[]) => {
  console.log('Filtros cargados:', filters);
};
</script>
```

## Métodos Expuestos

El componente expone los métodos `apply` y `clear` que pueden ser llamados mediante template ref.

```vue
<template>
  <SFilter ref="filterRef" :fields="fields" @apply="onApply" />
  <button @click="filterRef?.apply()">Aplicar</button>
  <button @click="filterRef?.clear()">Limpiar</button>
</template>
```

## Operadores

### Operadores Predefinidos

| Categoría | Operadores |
|-----------|-----------|
| Comparación | `equal`, `notEqual`, `greaterThan`, `greaterThanOrEqual`, `lessThan`, `lessThanOrEqual` |
| Texto | `contains`, `notContains`, `startsWith`, `endsWith` |
| Rango | `between`, `notBetween` |
| Fecha | `lastWeek`, `lastMonth`, `lastYear`, `today`, `yesterday` |
| Existencia | `exist`, `notExist` |

## Props

| Prop | Tipo | Default | Descripción |
|------|------|---------|-------------|
| `fields` | `TField[]` | - | Array de campos filtrables |
| `hideApplyButton` | `boolean` | `false` | Oculta el botón de aplicar |
| `hideClearButton` | `boolean` | `false` | Oculta el botón de limpiar |
| `applyWhenClear` | `boolean` | `false` | Aplica los filtros automáticamente al limpiar |
| `immediateApply` | `boolean` | `false` | Aplica los filtros inmediatamente al montar el componente |
| `responsive` | `boolean` | `true` | Controla el comportamiento responsivo |
| `saved` | `TSaveData[]` | - | Configuraciones de filtros guardados. Muestra el botón de guardar cuando se proporciona |

## Eventos

| Evento | Payload | Descripción |
|--------|---------|-------------|
| `apply` | `TField[]` | Se emite cuando se aplican los filtros. Contiene solo los campos con estado activo |
| `clear` | `TField[]` | Se emite cuando se limpian los filtros |
| `save` | `TSaveData[]` | Se emite cuando el usuario guarda una configuración de filtros |
| `load` | `TField[]` | Se emite cuando se carga un filtro guardado |
